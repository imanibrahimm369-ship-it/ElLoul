<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>نظام صيدلية د. سيد</title>
    <meta name="description" content="نظام إدارة مخزون وجرد لصيدلية د. سيد.">
    
    <!-- (جديد) الخط الاحترافي IBM Plex Sans Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Libs -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>

    <!-- PWA and Icons -->
    <link rel="apple-touch-icon" href="https://placehold.co/192x192/4f46e5/ffffff?text=Rx">
    <meta name="theme-color" content="#4f46e5">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuiC3cKq2Kgg2YXZhtiv2YjYqSDOoy4g2LPZitivINi52YXYsdarIiwKICAic2hvcnRfbmFtZSI6ICLYldmG2K/ZiNipIM6jLiDYt9mI2KwIiwKICAic3RhcnRfdXJsIjoiLi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmNmY4ZmEiLAogICJ0aGVtZV9jb2xvciI6ICIjNGY0NmU1IiwgCiAgImRlc2NyaXB0aW9uIjogItiC3cKq2Kgg2YXYrNin2LHZiiDZhNmF2KfYsdis2YLYrSDZgtmE2YXYp9mEINin2YTYqNiv2YjZhiDZhNmE2LLZitix2KjZhi4iLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJodHRwczovL3BsYWNlaG9sZC5jby8xOTJ4MTkyLzRmNDZlNSIvZmZmZmZmP3RleHQ9UngiLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiaHR0cHM6Ly9wbGFjZWhvbGQuYm8vNTEyeDUxMi80ZjQ2ZTUvZmZmZmZmP3RleHQ9UngiLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0KICBdCn0=">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 
      (جديد) أيقونات SVG البديلة للمنتجات
      سيتم استخدامها كصور افتراضية بدلاً من أيقونة الكاميرا 
    -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="svg-icon-pills" viewBox="0 0 24 24">
            <path fill="currentColor" d="M11.5 1h-6A1.5 1.5 0 0 0 4 2.5V8H2.5a1.5 1.5 0 0 0 0 3H4v5.5A1.5 1.5 0 0 0 5.5 18h6a1.5 1.5 0 0 0 1.5-1.5V13h1.5a1.5 1.5 0 0 0 0-3H13V2.5A1.5 1.5 0 0 0 11.5 1M10 8H7V5h3Z"/>
            <path fill="currentColor" d="M18.5 6h-6A1.5 1.5 0 0 0 11 7.5v6.236a3.5 3.5 0 1 0 2 0V11h1.5a1.5 1.5 0 0 0 0-3H13V7.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5V8h1.5a1.5 1.5 0 0 0 0-3H19V2.5A1.5 1.5 0 0 0 17.5 1h-6a1.5 1.5 0 0 0-1.5 1.5V4h1.5a1.5 1.5 0 0 0 0 3H12v.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5V7.5a1.5 1.5 0 0 0 1.5-1.5m-1 14.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0"/>
        </symbol>
        <symbol id="svg-icon-shampoo" viewBox="0 0 24 24">
            <path fill="currentColor" d="M16 8.5V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v4.5a3.5 3.5 0 1 0 4 0m-2-3a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zM17.5 10a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0m-1 3H7.5A2.5 2.5 0 0 0 5 15.5v6A1.5 1.5 0 0 0 6.5 23h11A1.5 1.5 0 0 0 19 21.5v-6A2.5 2.5 0 0 0 16.5 13m0 2A.5.5 0 0 1 17 15.5v5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5z"/>
        </symbol>
        <symbol id="svg-icon-baby" viewBox="0 0 24 24">
            <path fill="currentColor" d="M21 12a1 1 0 0 0-1-1h-1.58a10 10 0 0 0-16.84 0H1a1 1 0 0 0 0 2h1.58a10 10 0 0 0 16.84 0H21a1 1 0 0 0 0-2M12 17a3 3 0 1 1 3-3a3 3 0 0 1-3 3"/>
            <path fill="currentColor" d="M12 2a10 10 0 0 0-8.42 14.2a1 1 0 0 0 1.83.8A8 8 0 0 1 12 4a8 8 0 0 1 6.59 13a1 1 0 0 0 1.83-.8A10 10 0 0 0 12 2"/>
        </symbol>
        <symbol id="svg-icon-bug" viewBox="0 0 24 24">
            <path fill="currentColor" d="M16.5 9A.5.5 0 0 0 16 9.5V11h-3v-.5a.5.5 0 0 0-1 0V11H9v-.5a.5.5 0 0 0-1 0V11H5a1 1 0 0 0-1 1v1.5a.5.5 0 0 0 1 0V12h3v1.5a.5.5 0 0 0 1 0V12h2v1.5a.5.5 0 0 0 1 0V12h3v1.5a.5.5 0 0 0 1 0V12a1 1 0 0 0-1-1m-4 5h-1v-2h1zm-3-2v2H8.5a.5.5 0 0 0 0 1H10v1.5a.5.5 0 0 0 1 0V17h2v-.5a.5.5 0 0 0 1 0V17h1.5a.5.5 0 0 0 0-1H14v-2h1.5a.5.5 0 0 0 0-1H14v-1.5a.5.5 0 0 0-1 0V12h-2v-.5a.5.5 0 0 0-1 0zM19.91 7A4.48 4.48 0 0 0 17 4.09V2.5a.5.5 0 0 0-1 0V4.09A4.48 4.48 0 0 0 13.09 7H10.91A4.48 4.48 0 0 0 8 4.09V2.5a.5.5 0 0 0-1 0V4.09A4.48 4.48 0 0 0 4.09 7H2.5a.5.5 0 0 0 0 1H4.09A4.48 4.48 0 0 0 7 10.91V20a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V10.91A4.48 4.48 0 0 0 19.91 8H21.5a.5.5 0 0 0 0-1zM8 9a3.5 3.5 0 0 1 6 0H8z"/>
        </symbol>
        <symbol id="svg-icon-box" viewBox="0 0 24 24">
            <path fill="currentColor" d="M21 4.002H3a1 1 0 0 0-1 1v13.996a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V5.002a1 1 0 0 0-1-1m-1 13.996H4V6.002h16z"/>
            <path fill="currentColor" d="M10 12.002H8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1m-1 2H9v-1h1zm7-2h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1m-1 2h-1v-1h1z"/>
        </symbol>
    </svg>

    <!-- 
      (جديد) هيكل الصفحات
      - auth-page: صفحة تسجيل الدخول
      - pending-page: صفحة انتظار التفعيل
      - app-page: التطبيق الرئيسي (المخزن)
      - cart-page: صفحة السلة المستقلة
    -->

    <!-- (جديد) صفحة تسجيل الدخول المستقلة -->
    <div id="auth-page" class="page-container">
        <div class="auth-container">
            <div class="auth-card">
                <img src="https://placehold.co/100x100/4f46e5/ffffff?text=Rx" alt="Logo" class="w-20 h-20 mx-auto rounded-full shadow-lg mb-4">
                <h2 id="auth-title" class="text-3xl font-extrabold text-gray-900 text-center">تسجيل الدخول</h2>
                <p id="auth-subtitle" class="text-gray-600 mt-2 text-center">أهلاً بك في صيدلية د. سيد</p>
                
                <div class="mt-8">
                    <div class="auth-tab-nav">
                        <div id="auth-tab-highlighter" class="auth-tab-highlighter"></div>
                        <button id="auth-tab-login" class="auth-tab-button active">تسجيل الدخول</button>
                        <button id="auth-tab-signup" class="auth-tab-button">إنشاء حساب</button>
                    </div>
                    
                    <div id="auth-form-container" class="mt-6">
                        <form id="login-form" class="space-y-6 form-active">
                            <div class="auth-input-group"><input type="email" id="login-email" placeholder="البريد الإلكتروني" required class="auth-input"><i class="fas fa-envelope auth-input-icon"></i></div>
                            <div class="auth-input-group"><input type="password" id="login-password" placeholder="كلمة المرور" required class="auth-input"><i class="fas fa-eye password-icon" data-target="login-password"></i></div>
                            <div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"><label for="remember-me" class="mr-2 block text-sm text-gray-700">تذكرني</label></div><div class="text-sm"><a href="#" id="forgot-password-link" class="text-primary font-semibold hover:underline">هل نسيت كلمة المرور؟</a></div></div>
                            <button type="submit" id="login-button" class="w-full flex justify-center py-3 font-semibold text-white bg-primary rounded-lg hover:bg-primary-darker auth-button">دخول</button>
                        </form>
                        
                        <form id="signup-form" class="space-y-6">
                            <div class="auth-input-group"><input type="text" id="signup-name" placeholder="الاسم الكامل" required class="auth-input"><i class="fas fa-user auth-input-icon"></i></div>
                            <div class="auth-input-group"><input type="email" id="signup-email" placeholder="البريد الإلكتروني" required class="auth-input"><i class="fas fa-envelope auth-input-icon"></i></div>
                            <div class="auth-input-group"><input type="tel" id="signup-phone" placeholder="رقم الهاتف (اختياري)" class="auth-input"><i class="fas fa-phone auth-input-icon"></i></div>
                            <div class="auth-input-group"><input type="password" id="signup-password" placeholder="كلمة المرور (6 حروف على الأقل)" required class="auth-input"><i class="fas fa-eye password-icon" data-target="signup-password"></i></div>
                            <button type="submit" id="signup-button" class="w-full flex justify-center py-3 font-semibold text-white bg-primary rounded-lg hover:bg-primary-darker auth-button">إنشاء الحساب</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- (جديد) صفحة انتظار التفعيل -->
    <div id="pending-page" class="page-container hidden flex-col items-center justify-center min-h-screen text-center p-4">
        <div class="bg-white p-10 rounded-2xl shadow-lg"><i class="fas fa-clock fa-4x text-yellow-500 mb-4"></i><h1 class="text-3xl font-bold text-gray-800">حسابك قيد المراجعة</h1><p class="mt-2 text-gray-600">شكرًا لتسجيلك! سيقوم الأدمن بمراجعة حسابك وتفعيله قريبًا.</p><button id="pending-logout-button" class="mt-6 px-6 py-2 font-semibold text-white bg-red-500 rounded-lg hover:bg-red-600 transition-all">تسجيل الخروج</button></div>
    </div>

    <!-- (جديد) صفحة التطبيق الرئيسية (المخزن) -->
    <div id="app-page" class="page-container hidden min-h-screen flex-col">
        <!-- القائمة العلوية -->
        <header class="header-glass sticky top-0 z-30">
            <div class="flex items-center justify-between h-20 max-w-7xl mx-auto px-4 sm:px-8 w-full">
                
                <div id="avatar-container" class="relative">
                    <button id="user-avatar-button" class="avatar-button avatar-user"></button>
                    <div id="avatar-menu" class="avatar-menu hidden absolute right-0 mt-3 w-72 rounded-lg shadow-lg z-50 overflow-hidden">
                        <div class="p-4 border-b border-white/10">
                            <h4 id="avatar-menu-name" class="font-bold text-lg text-white truncate">...</h4>
                            <p id="avatar-menu-email" class="text-sm text-white/60 truncate">...</p>
                        </div>
                        <div class="px-4 py-2 border-b border-white/10">
                             <span id="avatar-menu-level-name" class="text-sm font-semibold text-white/80">المستوى 1</span>
                        </div>
                        <nav class="py-2">
                            <div id="avatar-settings-btn" class="avatar-menu-item"><i class="fas fa-cog"></i><span>تعديل الملف الشخصي</span></div>
                            <div id="avatar-admin-btn" class="avatar-menu-item hidden"><i class="fas fa-user-shield"></i><span>لوحة تحكم الأدمن</span></div>
                            <hr class="border-white/10 my-1">
                            <div id="avatar-logout-btn" class="avatar-menu-item"><i class="fas fa-sign-out-alt text-red-400"></i><span>تسجيل الخروج</span></div>
                        </nav>
                    </div>
                </div>

                <div class="flex-1 flex justify-center px-4">
                    <div class="search-wrapper">
                        <i class="fas fa-search search-icon"></i>
                        <input id="searchInput" type="text" placeholder="ابحث في كل الأصناف...">
                        <button id="clearSearchBtn" class="absolute hidden items-center text-gray-500 hover:text-primary"><i class="fas fa-times-circle"></i></button>
                    </div>
                </div>

                <div class="flex items-center gap-4">
                    <button id="cart-btn" class="header-btn" title="سلة المشتريات">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count" class="cart-count hidden">0</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Category Tabs -->
        <div class="bg-white border-b border-gray-200 sticky top-20 z-20">
            <div id="category-tabs-container" class="category-tabs-container max-w-7xl mx-auto px-2 sm:px-6 custom-scrollbar"></div>
        </div>

        <!-- Main Content -->
        <main class="flex-1 w-full max-w-7xl mx-auto p-4 sm:p-8">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8">
                <h2 id="current-category-title" class="text-3xl font-extrabold text-dark mb-4 sm:mb-0">كل الأصناف</h2>
                <div id="sort-container" class="relative">
                    <button id="sort-btn" class="flex items-center gap-2 bg-white border border-border-color rounded-full px-4 py-2 text-sm font-semibold text-text-muted hover:border-primary hover:text-primary transition-colors"><i class="fas fa-sort-amount-down"></i><span id="sort-label">ترتيب حسب</span><i class="fas fa-chevron-down text-xs ml-auto"></i></button>
                    <div id="sort-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-border-color z-40 overflow-hidden">
                        <a href="#" class="sort-option block px-4 py-2 text-sm text-dark hover:bg-gray-100" data-sort="default">افتراضي</a>
                        <a href="#" class="sort-option block px-4 py-2 text-sm text-dark hover:bg-gray-100" data-sort="price-desc">السعر: من الأعلى للأقل</a>
                        <a href="#" class="sort-option block px-4 py-2 text-sm text-dark hover:bg-gray-100" data-sort="price-asc">السعر: من الأقل للأعلى</a>
                        <a href="#" class="sort-option block px-4 py-2 text-sm text-dark hover:bg-gray-100" data-sort="name-asc">الاسم: أ - ي</a>
                        <a href="#" class="sort-option block px-4 py-2 text-sm text-dark hover:bg-gray-100" data-sort="name-desc">الاسم: ي - أ</a>
                    </div>
                </div>
            </div>
            
            <div id="loader" class="text-center py-20">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 skeleton-loader">
                    <!-- Skeleton Card (سيتم تكرارها 5 مرات) -->
                    <div class="bg-white rounded-lg shadow-md p-4 animate-pulse"><div class="h-40 bg-gray-200 rounded-md"></div><div class="h-6 bg-gray-200 rounded-md mt-4 w-3/4"></div><div class="h-8 bg-gray-200 rounded-md mt-2 w-1/2"></div><div class="h-10 bg-gray-200 rounded-md mt-4"></div></div>
                    <div class="bg-white rounded-lg shadow-md p-4 animate-pulse hidden sm:block"><div class="h-40 bg-gray-200 rounded-md"></div><div class="h-6 bg-gray-200 rounded-md mt-4 w-3/4"></div><div class="h-8 bg-gray-200 rounded-md mt-2 w-1/2"></div><div class="h-10 bg-gray-200 rounded-md mt-4"></div></div>
                    <div class="bg-white rounded-lg shadow-md p-4 animate-pulse hidden lg:block"><div class="h-40 bg-gray-200 rounded-md"></div><div class="h-6 bg-gray-200 rounded-md mt-4 w-3/4"></div><div class="h-8 bg-gray-200 rounded-md mt-2 w-1/2"></div><div class="h-10 bg-gray-200 rounded-md mt-4"></div></div>
                    <div class="bg-white rounded-lg shadow-md p-4 animate-pulse hidden xl:block"><div class="h-40 bg-gray-200 rounded-md"></div><div class="h-6 bg-gray-200 rounded-md mt-4 w-3/4"></div><div class="h-8 bg-gray-200 rounded-md mt-2 w-1/2"></div><div class="h-10 bg-gray-200 rounded-md mt-4"></div></div>
                    <div class="bg-white rounded-lg shadow-md p-4 animate-pulse hidden 2xl:block"><div class="h-40 bg-gray-200 rounded-md"></div><div class="h-6 bg-gray-200 rounded-md mt-4 w-3/4"></div><div class="h-8 bg-gray-200 rounded-md mt-2 w-1/2"></div><div class="h-10 bg-gray-200 rounded-md mt-4"></div></div>
                </div>
            </div>
            
            <div id="inventory-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">
                <!-- 
                  (جديد) هيكل البطاقة المبسط
                <div class="product-card">
                    <div class="admin-icons">
                        <button class="admin-icon-btn edit-btn" data-id="..."><i class="fas fa-edit"></i></button>
                        <button class="admin-icon-btn delete-btn" data-id="..."><i class="fas fa-trash-alt"></i></button>
                    </div>
                    <div class="product-quantity-badge">...</div>
                    <div class="product-image-container">
                        <img src="..." class="product-image" ...>
                    </div>
                    <div class="p-4 flex-grow">
                        <h3 class="product-title">...</h3>
                        <p class="product-price">...</p>
                    </div>
                    <div class="p-4 pt-0">
                        <button class="add-to-cart-btn" data-id="...">...</button>
                    </div>
                </div>
                -->
            </div>
            <div id="no-results" class="hidden text-center text-gray-500 py-20"><i class="far fa-surprise text-7xl mb-4"></i><p class="text-3xl font-semibold">لا توجد نتائج مطابقة</p></div>
            <div id="lazy-loader" class="hidden text-center py-10"><i class="fas fa-spinner fa-spin text-primary text-3xl"></i></div>
            <div id="sentinel" class="w-full h-10"></div>
        </main>

        <button id="addProductBtn" class="hidden fixed bottom-8 right-8 bg-primary hover:bg-primary-darker text-white w-16 h-16 rounded-full shadow-lg items-center justify-center text-3xl z-20 transition-transform transform hover:scale-110"><i class="fas fa-plus"></i></button>

        <footer class="text-center py-6 border-t border-border-color bg-white">
            <p class="text-gray-600">
                صنع بواسطة <span id="footer-brand-link" class="font-bold text-primary cursor-pointer hover:underline">ElLoul</span> &copy; <span id="current-year"></span>
                <span class="mx-2">|</span>
                <span id="sitemap-link" class="font-medium text-gray-600 cursor-pointer hover:text-primary hover:underline">خريطة الموقع</span>
            </p>
            <div class="footer-social-links">
                <a href="https://www.facebook.com/AliMamdouhh369?mibextid=ZbWKwL" target="_blank" title="Facebook"><i class="fab fa-facebook"></i></a>
                <a href="https://api.WhatsApp.com/send?phone=+201206796831" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                <a href="https://www.instagram.com/alimamdouhhh369/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://t.me/AliMamdouhh369" target="_blank" title="Telegram"><i class="fab fa-telegram"></i></a>
                <a href="https://tiktok.com/@alimamdouhh369" target="_blank" title="TikTok"><i class="fab fa-tiktok"></i></a>
            </div>
        </footer>

        <!-- (جديد) إشعار تثبيت التطبيق - لا يزال هنا -->
        <div id="install-toast" class="hidden fixed bottom-4 right-4 lg:bottom-8 lg:right-8 bg-white rounded-2xl shadow-2xl p-4 w-[calc(100%-2rem)] max-w-sm z-50 items-start gap-4">
            <img src="https://placehold.co/64x64/4f46e5/ffffff?text=Rx" alt="App Icon" class="w-12 h-12 rounded-lg flex-shrink-0">
            <div class="flex-1">
                <p class="font-bold text-text-dark">ثبّت تطبيق الصيدلية</p>
                <p class="text-sm text-text-muted mt-1">وصول سريع للمخزن من شاشتك الرئيسية.</p>
                <div class="mt-4 flex gap-2">
                    <button id="install-btn" class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-semibold w-full transition-all hover:bg-primary-darker">تثبيت</button>
                    <button id="dismiss-install-btn" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg text-sm font-semibold w-full transition-all hover:bg-gray-300">لاحقًا</button>
                </div>
            </div>
        </div>
    </div>


    <!-- (جديد) صفحة السلة المستقلة -->
    <div id="cart-page" class="page-container hidden min-h-screen flex-col bg-light-bg">
        <!-- شريط علوي لصفحة السلة -->
        <header class="bg-white shadow-sm sticky top-0 z-30">
            <div class="flex items-center justify-between h-20 max-w-7xl mx-auto px-4 sm:px-8 w-full">
                <h2 class="text-2xl font-bold text-text-dark">سلة المشتريات</h2>
                <button id="cart-back-btn" class="text-lg font-semibold text-primary flex items-center gap-2">
                    <i class="fas fa-arrow-left"></i>
                    العودة للمتجر
                </button>
            </div>
        </header>

        <!-- محتوى صفحة السلة -->
        <main class="flex-1 w-full max-w-7xl mx-auto p-4 sm:p-8">
            <div id="cart-empty-msg" class="hidden text-center text-gray-500 py-20">
                <i class="fas fa-shopping-cart fa-4x mb-4"></i>
                <p class="text-xl font-semibold">سلتك فارغة!</p>
                <p class="mt-2 text-text-muted">يبدو أنك لم تقم بإضافة أي منتجات بعد.</p>
            </div>
            
            <div id="cart-content" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- العمود الأيمن: قائمة المنتجات -->
                <div id="cart-items-list" class="lg:col-span-2 space-y-4">
                    <!-- عناصر السلة (من JS) ستظهر هنا -->
                    <!-- 
                    <div class="cart-item-card"> ... </div>
                    -->
                </div>

                <!-- العمود الأيسر: ملخص الطلب -->
                <aside id="cart-summary" class="lg:col-span-1 bg-white p-6 rounded-lg shadow-md h-fit sticky top-28">
                    <h3 class="text-xl font-bold text-text-dark border-b pb-3 mb-4">ملخص الطلب</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center text-lg">
                            <span class="text-text-muted">الإجمالي الفرعي:</span>
                            <span id="cart-subtotal-price" class="font-semibold text-text-dark">0.00 جم</span>
                        </div>
                        <!-- يمكنك إضافة "الشحن" أو "الخصم" هنا -->
                        <div class="border-t pt-4 mt-4">
                            <div class="flex justify-between items-center text-2xl font-bold">
                                <span class="text-text-dark">الإجمالي النهائي:</span>
                                <span id="cart-total-price" class="text-primary">0.00 جم</span>
                            </div>
                        </div>
                        <button id="checkout-btn" class="w-full flex justify-center py-3 mt-4 font-semibold text-white bg-primary rounded-lg hover:bg-primary-darker auth-button disabled:bg-gray-400">
                            إتمام الطلب
                        </button>
                    </div>
                </aside>
            </div>
        </main>
    </div>

    <!-- 
      اللوحات المنبثقة (Modals)
      تبقى كما هي لأنها تعمل فوق الصفحات
    -->
    <div id="admin-panel" class="panel panel-center fixed inset-0 bg-black bg-opacity-50 z-40 items-center justify-center p-4">
        <div class="glass-modal rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-primary-glow">
            <div class="p-4 border-b border-white/20 flex justify-between items-center"><h3 class="text-xl font-bold text-text-dark">لوحة تحكم الأدمن</h3><button id="close-admin-panel" class="text-gray-500 hover:text-gray-800 text-2xl transition-all">&times;</button></div>
            <div id="admin-users-list" class="p-4 overflow-y-auto custom-scrollbar"></div>
        </div>
    </div>

    <div id="settings-panel" class="panel panel-center fixed inset-0 bg-black bg-opacity-50 z-40 items-center justify-center p-4">
        <div class="glass-modal rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col border border-primary-glow">
            <div class="p-4 border-b border-white/20 flex justify-between items-center"><h3 class="text-xl font-bold text-text-dark">إعدادات الحساب</h3><button id="close-settings-panel" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button></div>
            <div class="border-b border-gray-200"><nav class="flex -mb-px px-6" aria-label="Tabs"><button class="settings-tab active" data-tab="profile">الملف الشخصي</button><button class="settings-tab" data-tab="password">تغيير كلمة المرور</button></nav></div>
            <div id="settings-content" class="p-6 overflow-y-auto custom-scrollbar">
                <div id="settings-tab-profile" class="settings-content-pane active">
                    <h4 class="text-lg font-semibold text-primary mb-4">الصورة الرمزية</h4>
                    <div class="flex items-center gap-4 mb-4">
                        <img id="avatar-preview" src="https://placehold.co/100x100/e0e7ff/4f46e5?text=AV" class="w-24 h-24 rounded-full border-4 border-white shadow-md object-cover">
                        <div id="avatar-upload-section" class="flex-1"><p class="text-text-muted text-sm pointer-events-none">اسحب وأفلت صورة هنا أو انقر للاختيار</p><input type="file" id="avatar-file-input" class="hidden" accept="image/*"></div>
                    </div>
                    <input type="text" id="avatar-url-input" class="settings-input mb-6" placeholder="أو الصق رابط صورة هنا">
                    <hr class="my-6">
                    <h4 class="text-lg font-semibold text-primary mb-4">المعلومات الأساسية</h4>
                    <form id="profile-settings-form">
                        <div class="mb-4"><label for="settings-name" class="settings-label">الاسم الكامل</label><input type="text" id="settings-name" class="settings-input" required></div>
                        <div class="mb-4"><label for="settings-phone" class="settings-label">رقم الهاتف</label><input type="tel" id="settings-phone" class="settings-input" placeholder="مثال: 01012345678"></div>
                        <div class="mb-6"><label for="settings-email" class="settings-label">البريد الإلكتروني (لا يمكن تغييره)</label><input type="email" id="settings-email" class="settings-input bg-gray-200 cursor-not-allowed" disabled></div>
                        <button type="submit" id="save-profile-btn" class="settings-button w-full sm:w-auto">حفظ التغييرات</button>
                    </form>
                </div>
                <div id="settings-tab-password" class="settings-content-pane">
                    <form id="password-settings-form">
                        <div class="mb-4"><label for="settings-new-password" class="settings-label">كلمة المرور الجديدة</label><input type="password" id="settings-new-password" class="settings-input" required minlength="6"></div>
                        <div class="mb-6"><label for="settings-confirm-password" class="settings-label">تأكيد كلمة المرور</label><input type="password" id="settings-confirm-password" class="settings-input" required minlength="6"></div>
                        <button type="submit" id="save-password-btn" class="settings-button w-full sm:w-auto">تغيير كلمة المرور</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="sitemap-panel" class="panel panel-center fixed inset-0 bg-black bg-opacity-50 z-40 items-center justify-center p-4">
        <div class="glass-modal rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col border border-primary-glow">
            <div class="p-4 border-b border-white/20 flex justify-between items-center"><h3 class="text-xl font-bold text-text-dark">خريطة الموقع</h3><button id="close-sitemap-panel" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button></div>
            <div id="sitemap-content" class="p-6 overflow-y-auto custom-scrollbar"></div>
        </div>
    </div>

    <!-- Custom JavaScript -->
    <script type="module" src="app.js"></script>
</body>
</html>


